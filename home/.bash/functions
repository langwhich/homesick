function title() {
  PROMPT_COMMAND="echo -ne \"\033]0;$*\a\""
}

function pwdtitle() {
  title "${USER}@${HOSTNAME%%.*}:${PWD/#$HOME/~}"
}

function rbenv-update {
  if [ $UID = 0 ]; then
    export RBENV_ROOT="/usr/local/rbenv"
  else
    export RBENV_ROOT="$HOME/.rbenv"
  fi

  if [ -d $RBENV_ROOT ]; then
    pushd $RBENV_ROOT > /dev/null
    git-up 
    popd > /dev/null
  else
    git clone git://github.com/sstephenson/rbenv.git $RBENV_ROOT
  fi

  if [ -d $RBENV_ROOT/plugins/rbenv-build ]; then
    pushd $RBENV_ROOT/plugins/rbenv-build > /dev/null
    git-up
    popd > /dev/null
  else
    git clone git://github.com/sstephenson/ruby-build.git $RBENV_ROOT/plugins/rbenv-build
  fi

  local PLUGINS=(
    "sstephenson:rbenv-vars"
    "jamis:rbenv-gemset"
    "Rodreegez:rbenv-only"
    "chriseppstein:rbenv-each"
    "carsomyr:rbenv-bundler"
  )

  for PLUGIN in ${PLUGINS[@]}; do
    local PLUGUSER=${PLUGIN%%:*}
    local PLUGNAME=${PLUGIN#*:}

    local PLUGROOT=$RBENV_ROOT/plugins/$PLUGNAME

    if [ -d $PLUGROOT ]; then
      pushd $PLUGROOT > /dev/null
      git-up
      popd > /dev/null
    else
      git clone git://github.com/$PLUGUSER/$PLUGNAME.git $PLUGROOT
    fi
  done
}
